global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Alert rules
rule_files:
  - alerts.yml

scrape_configs:
  # ETL Pipeline Services
  - job_name: "extractor"
    static_configs:
      - targets: ["extractor:8080"]
        labels:
          service: "extractor"
          stage: "extract"

  - job_name: "transformer"
    static_configs:
      - targets: ["transformer:8080"]
        labels:
          service: "transformer"
          stage: "transform"

  - job_name: "cleaner"
    static_configs:
      - targets: ["cleaner:8080"]
        labels:
          service: "cleaner"
          stage: "clean"

  # Streamlit ML Service
  - job_name: "streamlit"
    static_configs:
      - targets: ["streamlit:8080"]
        labels:
          service: "streamlit"
          stage: "ml"

  # RabbitMQ Exporter
  - job_name: "rabbitmq"
    static_configs:
      - targets: ["rabbitmq-exporter:9419"]
        labels:
          service: "rabbitmq"
          component: "message_queue"

  # MinIO Metrics
  - job_name: "minio"
    metrics_path: "/minio/v2/metrics/cluster"
    static_configs:
      - targets: ["minio:9000"]
        labels:
          service: "minio"
          component: "object_storage"

